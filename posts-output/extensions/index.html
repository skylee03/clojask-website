<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Clojask: Extensions</title>
        
<meta name="keywords" content="Start">

<meta name="description" content="clojask.extensionsLike many popular Python libraries, such as numpy and pandas, third-party users can extend the function of Clojask by introducing more codes above the basic source code. Here is an example to support the creating such extension functions under the directory of clojask.extensions.">

<meta property="og:description" content="clojask.extensionsLike many popular Python libraries, such as numpy and pandas, third-party users can extend the function of Clojask by introducing more codes above the basic source code. Here is an example to support the creating such extension functions under the directory of clojask.extensions.">

<meta property="og:url" content="https://clojure-finance.github.io/clojask-website/clojask-website/posts-output/extensions/" />
<meta property="og:title" content="Extensions" />
<meta property="og:type" content="article" />

        <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
        
        <link rel="shortcut icon" href="images/ico/favicon.png">
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700|Oxygen:300,400,700|Inconsolata" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300&display=swap" rel="stylesheet">
        <link href="/clojask-website/css/normalize.css" rel="stylesheet" type="text/css" />
        <link href="/clojask-website/css/blog.css" rel="stylesheet" type="text/css" />
        <link href="/clojask-website/css/lotus-highlightjs.min.css" rel="stylesheet" type="text/css" />
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/styles/tomorrow-night-eighties.min.css">
    </head>
    <body>
        <aside id="sidebar">
            <div id="logo">
                <a title="Clojask" href="/clojask-website/">
                    <!-- <img class="icon" src="/clojask-website/img/white-lotus.svg"> -->
                    <div class="title-text text desktop-and-tablet-only">
                        <span class="desktop-and-tablet-only fa fa-cubes"></span>
                        <br>
                        <br>
                        Clojask
                    </div>
                    <div class="title-text text mobile-only">Clojask</div>
                </a>
            </div> 

            <nav id="sidebar-links">
                <nav id="menucont">
                    <input type="checkbox" id="menu-checkbox" class="menu-checkbox">
                    <label for="menu-checkbox" class="menutitle">
                        <svg class="icon icon-menu" aria-hidden="true"><use xlink:href="/clojask-website/img/icons.svg#icon-menu"></use></svg><span class="menu-text">Menu</span>
                    </label>
                    <ul class="menu">
                        <li ><a title="Home" href="/clojask-website/"><div class="menu-item-text">Home</div></a></li>
                        <!-- 
                        <li ><a title="Tags" href="/clojask-website/tags/"><div class="menu-item-text">Tags</div></a></li>
                         -->
                        
                        <li >
                            <a href="/clojask-website/pages-output/about/"><div class="menu-item-text">About</div></a>
                        </li>
                        
                         <!-- custom navbar item -->
                        <li>
                            <a title="Getting Started" href="/clojask-website/posts-output/get-started/"><div class="menu-item-text">Getting Started</div></a>
                        </li>
                        <li>
                            <a title="API Docs" href="/clojask-website/posts-output/API/"><div class="menu-item-text">API Docs</div></a>
                        </li>
                        <li >
                            <a title="Examples" href="/clojask-website/posts-output/examples/"><div class="menu-item-text">Examples</div></a>
                        </li>
                        <li >
                            <a title="Extensions" href="/clojask-website/posts-output/extensions/"><div class="menu-item-text">Extensions</div></a>
                        </li>
                        
<!-- 
                        <button class="dropdown">Dropdown
                            <i class="fa fa-caret-down"></i>
                        </button>
                        <div class="dropdown-container">
                            <a href="#">Link 1</a>
                            <a href="##">Link 2</a>
                            <a href="###">Link 3</a>
                        </div>
                        </a> -->

                        <li ><a title="Archives" href="/clojask-website/archives/"><div class="menu-item-text">Archives</div></a></li>
                        <!-- <li><a title="RSS" href="/clojask-website/feed.xml"><div class="menu-item-text">RSS</div></a></li> -->
                    </ul>
                </nav>

                <nav id="socialmedia">
                    <ul>
                        <li><a title="GitHub" href="https://github.com/clojure-finance/clojask" rel="external"><svg class="icon icon-github-circled"><use xlink:href="/clojask-website/img/icons.svg#icon-github-circled"></use></svg></a></li>
                    </ul>
                </nav>
            </nav>
        </aside>

        <article id="main">
            
<div id="post">
    <div class="post-header">
    <div id="post-meta">
        <h1>Extensions</h1>
        <div class="byline">
            <!-- <span class="date">February 22, 2022</span> -->
            
        </div>
    </div>
</div>
<div>
    <ol class="toc"><li><a href="#clojaskextensions">clojask.extensions</a></li><ol><li><a href="#ns-clojaskextensionsbind">ns: clojask.extensions.bind</a></li><ol><li><a href="#cbind"><code>cbind</code></a></li><li><a href="#rbind"><code>rbind</code></a></li></ol><li><a href="#ns-clojaskextensionsreshape">ns: clojask.extensions.reshape</a></li><ol><li><a href="#api-foundation">API Foundation</a></li><li><a href="#melt"><code>melt</code></a></li><li><a href="#dcast"><code>dcast</code></a></li></ol></ol></ol>
    <h2 id="clojaskextensions">clojask.extensions</h2><p>Like many popular Python libraries, such as numpy and pandas, third-party users can extend the function of Clojask by introducing more codes above the basic source code. Here is an example to support the creating such extension functions under the directory of <code>clojask.extensions</code>.</p><hr /><h3 id="ns-clojaskextensionsbind">ns: clojask.extensions.bind</h3><h4 id="cbind"><code>cbind</code></h4><p>Joins some dataset files into a new dataframe by columns.</p><p><em>The separator of each file is determined by its file format. The list of default seperator for each file can be find in <a href="https://github.com/clojure-finance/clojask-io/blob/main/src/clojask_io/input.clj#L54">clojask-io.input</a>. If it does not fit your needs, please try to modify the source code of <code>cbind</code> and change the <code>:sep</code> option of each <code>read-file</code> function.</em></p><table><thead><tr><th>Argument</th><th>Type</th><th>Function</th><th>Remarks</th></tr></thead><tbody><tr><td>path-a</td><td>String</td><td>The path of the first dataset file</td><td>Can be absolute or relative path</td></tr><tr><td>path-b</td><td>String</td><td>The path of the second dataset file</td><td>Can be absolute or relative path</td></tr><tr><td>[path-c's]</td><td>String</td><td>The path of the rest dataset files</td><td>Can be absolute or relative path; the number is not fixed</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="clojure">;; file a
;; date,item,price
;; 2010-01-20,1,18.3
;; 2010-01-20,2,38.3
;; 2010-01-23,1,18.9
;; 2010-01-23,2,48.9
;; 2010-01-26,1,19.1
;; 2010-01-26,2,59.1

;; file b
;; date,cust,Item,sold
;; 2010-01-19,101,2,11
;; 2010-01-22,102,1,7
;; 2010-01-24,102,2,9
;; 2010-01-25,101,2,9
;; 2010-01-26,101,1,10

(def x (cbind "path/to/a" "path/to/b"))

;; x
;; date1,item,price,date2,cust,Item,sold
;; 2010-01-20,1,18.3,2010-01-19,101,2,11
;; 2010-01-20,2,38.3,2010-01-22,102,1,7
;; 2010-01-23,1,18.9,2010-01-24,102,2,9
;; 2010-01-23,2,48.9,2010-01-25,101,2,9
;; 2010-01-26,1,19.1,2010-01-26,101,1,10

;; can further be
(def x (cbind "path/to/a" "path/to/b" "path/to/c" "path/to/d"))
</code></pre><hr /><h4 id="rbind"><code>rbind</code></h4><p>Joins some dataset files into a new dataframe by rows.</p><p><em>The separator of each file is determined by its file format. The list of default seperator for each file can be find in <a href="https://github.com/clojure-finance/clojask-io/blob/main/src/clojask_io/input.clj#L54">clojask-io.input</a>. If it does not fit your needs, please try to modify the source code of <code>cbind</code> and change the <code>:sep</code> option of each <code>read-file</code> function.</em></p><table><thead><tr><th>Argument</th><th>Type</th><th>Function</th><th>Remarks</th></tr></thead><tbody><tr><td>path-a</td><td>String</td><td>The path of the first dataset file</td><td>Can be absolute or relative path</td></tr><tr><td>path-b</td><td>String</td><td>The path of the second dataset file</td><td>Can be absolute or relative path</td></tr><tr><td>[path-c's]</td><td>String</td><td>The path of the rest dataset files</td><td>Can be absolute or relative path; the number is not fixed</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="clojure">;; file a
;; date,item,price
;; 2010-01-20,1,18.3
;; 2010-01-20,2,38.3
;; 2010-01-23,1,18.9
;; 2010-01-23,2,48.9
;; 2010-01-26,1,19.1
;; 2010-01-26,2,59.1

;; file b
;; date,cust,Item,sold
;; 2010-01-19,101,2,11
;; 2010-01-22,102,1,7
;; 2010-01-24,102,2,9
;; 2010-01-25,101,2,9
;; 2010-01-26,101,1,10

(def x (rbind "path/to/a" "path/to/b"))
(print-df x)

|             date |             item |            price |
|------------------+------------------+------------------|
| java.lang.String | java.lang.String | java.lang.String |
|       2010-01-20 |                1 |             18.3 |
|       2010-01-20 |                2 |             38.3 |
|       2010-01-23 |                1 |             18.9 |
|       2010-01-23 |                2 |             48.9 |
|       2010-01-26 |                1 |             19.1 |
|       2010-01-26 |                2 |             59.1 |
|       2010-01-19 |              101 |                2 |
|       2010-01-22 |              102 |                1 |
|       2010-01-24 |              102 |                2 |
|       2010-01-25 |              101 |                2 |
</code></pre><hr /><h3 id="ns-clojaskextensionsreshape">ns: clojask.extensions.reshape</h3><p>Contains functions that can reshape a clojask dataframe from wide to long or from long to wide.</p><h4 id="api-foundation">API Foundation</h4><p>When defining a clojask.DataFrame using <code>dataframe</code> function, you can specify the option <code>:melt</code>, which should be a function that will be applied to each resultant row vector in the end. The default is vector, which will not affect the results. However, if <code>:melt</code> is set to</p><pre><code class="clojure">(fn [x]
  (repeat 2 x))
</code></pre><p>, then each row will be output twice.</p><h4 id="melt"><code>melt</code></h4><p>Reshape the dataframe from wide to long. <strong>(Instant operation)</strong></p><table><thead><tr><th>Argument</th><th>Type</th><th>Function</th><th>Remarks</th></tr></thead><tbody><tr><td>dataframe</td><td>clojask.DataFrame</td><td>Specify the dataframe</td><td> </td></tr><tr><td>output-path</td><td>String</td><td>The path of the output</td><td>Can be absolute or relative path with respect to the <code>project.clj</code> file.</td></tr><tr><td>id</td><td>vector of strings</td><td>The fixed portion of the columns</td><td>These columns must have a perfect correlation.</td></tr><tr><td>measurement</td><td>vector of strings</td><td>The measurement columns</td><td>In the result, the measurement names will become one column and the values will become another.</td></tr><tr><td>[measure_name]</td><td>String</td><td>The name of the measurement in the result</td><td>By default "measure"</td></tr><tr><td>[value_name]</td><td>String</td><td>The name of the value in the result</td><td>By default "value"</td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="clojure">;; x
;; family_id,age_mother,dob_child1,dob_child2,dob_child3
;; 1,30,1998-11-26,2000-01-29,
;; 2,27,1996-06-22,,
;; 3,26,2002-07-11,2004-04-05,2007-09-02
;; 4,32,2004-10-10,2009-08-27,2012-07-21
;; 5,29,2000-12-05,2005-02-28,
(melt x "path/to/output" ["family_id" "age_mother"] ["dob_child1" "dob_child2" "dob_child3"])
</code></pre><h4 id="dcast"><code>dcast</code></h4><p>Reshape the dataframe from long to wide. Reversible to <code>melt</code>. <strong>(Instant operation)</strong></p><table><thead><tr><th>Argument</th><th>Type</th><th>Function</th><th>Remarks</th></tr></thead><tbody><tr><td>dataframe</td><td>clojask.DataFrame</td><td>Specify the dataframe</td><td> </td></tr><tr><td>output-path</td><td>String</td><td>The path of the output</td><td>Can be absolute or relative path with respect to the <code>project.clj</code> file.</td></tr><tr><td>id</td><td>vector of strings</td><td>The fixed portion of the columns</td><td>These columns must have a perfect correlation.</td></tr><tr><td>measure-name</td><td>String</td><td>The name of the measurement</td><td>By default "measure"</td></tr><tr><td>value-name</td><td>String</td><td>The name of the value</td><td>By default "value"</td></tr><tr><td>values</td><td>vector of string/int/double/datetime</td><td>The value choices of the measurement column</td><td>The order matters as in the result file.</td></tr><tr><td>[vals-name]</td><td>vector of string</td><td>The name of the value columns</td><td>By default, same as <code>values</code></td></tr></tbody></table><p><strong>Example</strong></p><pre><code class="clojure">;; x
;; family_id,age_mother,measure,value
;; 1,30,dob_child1,1998-11-26
;; 1,30,dob_child2,2000-01-29
;; 1,30,dob_child3,
;; 2,27,dob_child1,1996-06-22
;; 2,27,dob_child2,
;; 2,27,dob_child3,
;; 3,26,dob_child1,2002-07-11
;; 3,26,dob_child2,2004-04-05
;; 3,26,dob_child3,2007-09-02
;; 4,32,dob_child1,2004-10-10
;; 4,32,dob_child2,2009-08-27
;; 4,32,dob_child3,2012-07-21
;; 5,29,dob_child1,2000-12-05
;; 5,29,dob_child2,2005-02-28
;; 5,29,dob_child3,
(dcast x "resources/test.csv" ["family_id" "age_mother"] "measure" "value" ["dob_child1" "dob_child2" "dob_child3"])
</code></pre>
</div>
<!--  -->
<!-- <br/> -->


    <!-- 
    <div id="prev-next">
    
    <div class="prev"></div>
    
    
    <a class="next" href="/clojask-website/posts-output/get-started/"><div class="nav-text"">Get Started</div><svg class="icon icon-circle-right"><use xlink:href="/clojask-website/img/icons.svg#icon-circle-right"></use></svg></a>
    
</div>

     -->

    


</div>

            <!-- <hr/> -->
            <br/>
            <div id="footercont">
                Copyright &copy; 2022 Clojask
                <br>Powered by <a href="http://cryogenweb.org">Cryogen</a>
            </div>
        </article>

        <script src="/clojask-website/js/highlight.pack.js" type="application/javascript"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="/clojask-website/js.dropdown.js" type="application/javascript"></script> 
        

        
        
    </body>
</html>
